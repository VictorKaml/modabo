create table table_name (
  p_id bigint generated by default as identity primary key,
  id uuid not null references auth.users on delete cascade,
  first_name text,
  last_name text,
  username text,
  dob text,
     gender text,
      country text,
       password text,
        national_id text,
         email text,
          phone_number text,
           verification text,
            type text,
             avatar_url text,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null
);



begin
  insert into public.profiles (id, first_name, last_name, username, email, password, type, phone_number, country, dob, gender, national_id, verification, avatar_url)
  values (new.id, new.raw_user_meta_data ->> 'firstname', new.raw_user_meta_data ->> 'lastname', new.raw_user_meta_data ->> 'username', new.raw_user_meta_data ->> 'email', new.raw_user_meta_data ->> 'password', new.raw_user_meta_data ->> 'type', new.raw_user_meta_data ->> 'phone', new.raw_user_meta_data ->> 'country', new.raw_user_meta_data ->> 'dob', new.raw_user_meta_data ->> 'gender', new.raw_user_meta_data ->> 'national', new.raw_user_meta_data ->> 'verification', new.raw_user_meta_data ->> 'avatar');
  return new;
end;
